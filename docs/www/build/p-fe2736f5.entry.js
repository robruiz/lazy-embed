import{r as e,g as t,h as i}from"./p-CAMS5NHk.js";const o=":host{display:block}.lazy-embed-container{position:relative;overflow:hidden;width:100%;max-width:100%}.preview-container{position:relative;width:100%;height:0;padding-bottom:56.25%;background-color:#000;cursor:pointer}.preview-image{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.placeholder{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;display:flex;justify-content:center;align-items:center}.play-overlay{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:rgba(0, 0, 0, 0.2);transition:background-color 0.3s ease}.play-overlay:hover{background-color:rgba(0, 0, 0, 0.4)}.play-button{width:68px;height:48px;background-color:rgba(0, 0, 0, 0.7);border-radius:8px;position:relative;transition:background-color 0.3s ease}.play-button::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-40%, -50%);width:0;height:0;border-style:solid;border-width:10px 0 10px 20px;border-color:transparent transparent transparent #fff}.play-overlay:hover .play-button{background-color:#ff0000}.embed-responsive{position:relative;width:100%;height:0;padding-bottom:56.25%;}.embed-responsive iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}";const s=class{constructor(t){e(this,t)}get el(){return t(this)}src;previewImage;alt="Video preview";width="100%";height="auto";videoTitle="";loadOnVisible=false;loadOnParentOpen="";loadOnClickSelector="";loaded=false;observer;mutationObserver;clickTriggerElements=[];videoInfo;connectedCallback(){this.parseVideoUrl();if(this.loadOnVisible){this.setupIntersectionObserver()}if(this.loadOnParentOpen){this.setupMutationObserver()}if(this.loadOnClickSelector){this.setupExternalClickListeners()}}disconnectedCallback(){if(this.observer){this.observer.disconnect()}if(this.mutationObserver){this.mutationObserver.disconnect()}this.clickTriggerElements.forEach((({element:e,handler:t})=>{e.removeEventListener("click",t)}));this.clickTriggerElements=[]}parseVideoUrl(){if(!this.src){this.videoInfo={type:"unknown",id:"",embedUrl:""};return}const e=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i;const t=this.src.match(e);const i=/(?:vimeo\.com\/(?:video\/)?|player\.vimeo\.com\/video\/)(\d+)/i;const o=this.src.match(i);if(t&&t[1]){this.videoInfo={type:"youtube",id:t[1],embedUrl:`https://www.youtube.com/embed/${t[1]}?autoplay=1`}}else if(o&&o[1]){this.videoInfo={type:"vimeo",id:o[1],embedUrl:`https://player.vimeo.com/video/${o[1]}?autoplay=1`}}else{this.videoInfo={type:"unknown",id:"",embedUrl:this.src}}}setupExternalClickListeners(){if(!this.loadOnClickSelector){return}const e=document.querySelectorAll(this.loadOnClickSelector);if(e.length===0){console.warn(`No elements found matching selector "${this.loadOnClickSelector}"`);return}e.forEach((e=>{const t=()=>{if(!this.loaded){this.loadVideo()}};e.addEventListener("click",t);this.clickTriggerElements.push({element:e,handler:t})}))}setupIntersectionObserver(){this.observer=new IntersectionObserver((e=>{if(e[0].isIntersecting&&!this.loaded){this.loadVideo()}}),{rootMargin:"100px",threshold:.1});this.observer.observe(this.el)}setupMutationObserver(){const e=document.querySelector(this.loadOnParentOpen);if(!e){console.warn(`Parent element with selector "${this.loadOnParentOpen}" not found.`);return}this.mutationObserver=new MutationObserver((t=>{t.forEach((t=>{if(t.type==="attributes"&&(t.attributeName==="class"||t.attributeName==="style")){const t=window.getComputedStyle(e);if(t.display!=="none"&&t.visibility!=="hidden"&&!this.loaded){this.loadVideo()}}}))}));this.mutationObserver.observe(e,{attributes:true,attributeFilter:["class","style"]})}async loadVideo(){if(!this.loaded&&this.videoInfo.embedUrl){this.loaded=true}}handleClick(){if(!this.loaded){this.loadVideo()}}render(){const e={width:this.width,height:this.height!=="auto"?this.height:null,position:"relative"};if(!this.loaded){return i("div",{class:"lazy-embed-container",style:e},i("div",{class:"preview-container"},this.previewImage?i("img",{src:this.previewImage,alt:this.alt,class:"preview-image"}):i("div",{class:"placeholder"},i("div",{class:"play-button"})),i("div",{class:"play-overlay"},i("div",{class:"play-button","aria-label":"Play video"}))))}else{return i("div",{class:"lazy-embed-container",style:e},i("div",{class:"embed-responsive"},i("iframe",{src:this.videoInfo.embedUrl,title:this.videoTitle||"Embedded video",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullScreen:true})))}}};s.style=o;export{s as lazy_embed};
//# sourceMappingURL=p-fe2736f5.entry.js.map